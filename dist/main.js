(()=>{"use strict";class t{constructor(t){this.controller=t,this.parent=document.querySelector("#setupForm")}render(){this.parent.style.border="1px solid black"}}class e{constructor(t,e,r){this.elementPoolController=t,this.dragAndDropController=e,this.parent=document.querySelector("#elementPool"),this.tileSize=r}render(t){for(;this.parent.firstChild;)this.parent.removeChild(this.parent.firstChild);this.parent.style.border="1px solid black";let e=document.createElement("h1");e.innerText="Plaats deze objecten in het grid",this.parent.append(e),t.forEach((t=>{let e=document.createElement("div");e.style.width=this.tileSize*t.width+"px",e.style.height=this.tileSize*t.height+"px",e.style.backgroundColor="red",e.classList.add("--container"),e.id=t.type,e.addEventListener("dblclick",(()=>{this.elementPoolController.rotate(t)})),e.innerText=""+t.type,this.parent.append(e)}))}}class r{constructor(t,e,r){this.type=t,this.width=e,this.height=r}rotate(){let t=this.height;this.height=this.width,this.width=t}}class i{constructor(){this.width=15,this.height=15,this.gridArray=[],this.setGrid()}setGrid(){for(let t=0;t<this.width;t++){let t=[];for(let e=0;e<this.height;e++)t.push(e);this.gridArray.push(t)}}}class s{constructor(t,e,r){this.grid=document.getElementById("grid"),this.objectArray=r,this.renderGrid(),this.selectbutton()}renderGrid(){for(let t=0;t<this.objectArray.length;t++){let e=this.objectArray[t],r=document.createElement("div");for(let i=0;i<e.length;i++){let e=document.createElement("div");e.dataset.col=t.toString(),e.dataset.row=i.toString(),e.classList.add("gridSquare"),e.style.width="40px",e.style.height="40px",e.style.border="1px dashed #FFF",e.style.borderWidth="0.1px 0.1px 0.1px 0.1px",e.style.backgroundColor="#42f56c",r.append(e)}this.grid.append(r)}}selectbutton(){document.querySelectorAll(".btn-terrain").forEach((t=>{t.addEventListener("click",(()=>{t.classList.contains("btn--active")?t.classList.remove("btn--active"):t.classList.add("btn--active")}))}))}}new class{constructor(){this.view=new t(this),this.view.render()}clicked(t){console.log(t)}},new class{constructor(t){this.view=new e(this,t,50),this.objects=[new r("eetkraam",1,1),new r("drankkraam",1,2),new r("toilet",1,3),new r("tent",3,3)],this.view.render(this.objects)}rotate(t){t.rotate(),this.view.render(this.objects)}};let n=new class{constructor(){this.grid=new i,this.objectArray=[],new s(this.grid.width,this.grid.height,this.grid.gridArray)}};new class{constructor(t){this.gridArray=t.gridArray,this.generateEvents()}handleDragStart(t){this.style.opacity="0.4",this.dragSrcEl=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.innerHTML),console.log(this)}handleDragEnd(){this.style.opacity="1"}handleDragOver(t){return t.preventDefault&&t.preventDefault(),!1}handleDrop(t){return t.stopPropagation&&t.stopPropagation(),this.dragSrcEl!==this&&(console.log("ongielie"),this.dropElement=t.target,console.log(this.dropElement.getAttribute("data-row")+", "+this.dropElement.getAttribute("data-col")),this.innerHTML=t.dataTransfer.getData("text/html")),!1}generateEvents(){let t=document.querySelectorAll(".--container");console.log(t),t.forEach((t=>{t.addEventListener("dragstart",this.handleDragStart,!1),t.addEventListener("dragend",this.handleDragEnd,!1)})),document.querySelectorAll(".gridSquare").forEach((t=>{t.addEventListener("dragover",this.handleDragOver,!1),t.addEventListener("drop",this.handleDrop,!1)}))}}(n)})();